<!doctype html>
<title>memory-stats.js demo</title>

<script src="../statsmemory.js"></script>

<body onload='onLoad()'>
<script>
// load by require.js to get the timer ? doesnt seems to work
function onLoad(){
	
	var statsMemory	= new StatsMemory();
	statsMemory.domElement.style.position	= 'absolute';
	statsMemory.domElement.style.right	= '0px';
	statsMemory.domElement.style.bottom	= (47*1)+'px';
	document.body.appendChild( statsMemory.domElement );
	

	requestAnimationFrame(function rAFloop(){
		statsMemory.update();
		requestAnimationFrame(rAFloop);
	});


	// generate plenty of objects
	// from example-pause.html in generation GC from firefox
	var garbage 	= [];
	var garbageSize	= 1024 * 1024 * 6;
	var garbageIdx	= 0;
	function makeGarbage(amount){
		for(var i = 0; i < amount; i++){
			//garbage[garbageIdx]	= new Object();
			garbage[garbageIdx]	= {};
			garbageIdx	= (garbageIdx+1) % garbageSize;
		}
	}
	requestAnimationFrame(function rAFloop(){
		makeGarbage(1024)
		requestAnimationFrame(rAFloop);
	});
}
</script></body>